// cpe-client v0.2.14 Dailymotion
var cpeclient=function(){"use strict";function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(function(e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var t=new Uint8Array(16);e.exports=function(){return n(t),t}}else{var o=new Array(16);e.exports=function(){for(var e,n=0;n<16;n++)0==(3&n)&&(e=4294967296*Math.random()),o[n]=e>>>((3&n)<<3)&255;return o}}})(n={exports:{}},n.exports);for(var n,t=[],o=0;o<256;++o)t[o]=(o+256).toString(16).substr(1);function a(){var e="prod",n=window&&window.location&&window.location.hostname?window.location.hostname:"localhost",t=/env=([^&]+)/.exec(window.location.search.substring(1));return("preprod.dailymotion.com"===n||"api-stage.dmcdn.net"===n||/stage-(\d+).dailymotion.com/.exec(n))&&(e="preprod"),t&&(e=t[1]),e}var r=function(){function n(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n)}var t,o,r;return t=n,(o=[{key:"launch",value:function(){var e=this;"loading"!==document.readyState?this.load():document.onreadystatechange=function(n){"loading"!==document.readyState&&e.load()}}},{key:"load",value:function(){document.onreadystatechange=null;this.extractCpeId();this.loadFullCpe()}},{key:"extractCpeId",value:function(){return window.cpe&&window.cpe.i?window.cpe.i:null}},{key:"loadFullCpe",value:function(){var e=this.getCpeUrl();window.cpeAsyncInit=function(){window.cpeAsyncInit=null},function(){var n=document.createElement("script");n.async=!0,n.src=e;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(n,t)}()}},{key:"getCpeUrl",value:function(){switch(a()){case"dev":return"app.js";case"qualif":case"pprod":case"preprod":return"https://api-stage.dmcdn.net/pxl/cpe/app.min.js"}return"https://api.dmcdn.net/pxl/cpe/app.min.js"}}])&&e(t.prototype,o),r&&e(t,r),n}();return(new r).launch(),r}();
